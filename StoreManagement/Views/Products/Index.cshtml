
@{
    ViewBag.Title = "Products";
}

<h2>@ViewBag.Title</h2>

<table id="products" class="table table-bordered table-hover">
  <thead>
  <tr>
    <th>Id</th>
    <th>Name</th>
    <th>Price</th>
  </tr>
  </thead>
  <tbody>
  </tbody>
</table>

@section scripts
{
  <script>
    $(document).ready(function () {
      var table = $("#products").DataTable({
        ajax: {
          url: "/api/products",
          dataSrc: ""
        },
        columns: [
          {
            data: "id"
          },
          {
            data: "name"
          },
          {
            data: "price"
           
          }
        ]
      });
      $("#products").on("click", ".js-delete", function () {
        var button = $(this);
        bootbox.confirm("Are you sure you want to delete this product?", function (result) {
          if (result) {
            $.ajax({
              url: "/api/movies/" + button.attr("data-movie-id"),
              method: "DELETE",
              success: function () {
                table.row(button.parents("tr")).remove().draw();
              }
            });
          }
        });
      });
    });
  </script>
}